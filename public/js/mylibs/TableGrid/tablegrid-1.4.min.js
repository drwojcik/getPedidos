function randomString(e){var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";var n="";for(var r=e;r>0;--r)n+=t[Math.round(Math.random()*(t.length-1))];return n}(function(e){e.fn.TableGrid=function(t){var n=e.extend({theme:"lighYellow",params:[{"class":"",name:""}],ajax:{url:"",data:"",type:""}},t);console.log(n);e(this).each(function(){var t=e(this).attr("id");var r=i;if(t==undefined)t="";if(t.indexOf("TG_")==-1){var i="TG_"+randomString(8);var r=i;e(this).attr("id",i)}var s=e(this).attr("class");var o="TG_table TG_child";var u="TGTheme_"+n.theme;e(this).attr("class",s+" "+o+" "+u);e(document).find("#"+r+" > thead > tr").each(function(){e(this).find("th:first").before('<th class="TG_detail">&nbsp;</th>')});e(document).find("#"+r+" > tbody > tr").each(function(){e(this).find("td:first").before('<td class="detailClose"> <a href="#" class="getDetail_'+r+'">&nbsp;</a> </td>')});var a=0;a=e(this).find("tbody > tr:first > td").length;e(".getDetail_"+r).click(function(){var t=e(this).parent().parent();var r={};for(p=0;p<n.params.length;p++){var i="."+n.params[p].class;var s=t.find(i).val()==""?t.find(i).html():t.find(i).val();r[n.params[p].name]=s}var o=e('<tr><td colspan="'+a+'" style="border: medium none; padding: 5px 0px; text-align: center;"> <div class="imgLoad">&nbsp;</div> </td></tr>');if(e(this).parent().attr("class")=="detailClose"){e(this).parent().attr("class","detailOpen");e.ajax({url:n.ajax.url,data:r,type:n.ajax.type,beforeSend:function(){t.after(o)},success:function(e){o.remove();var n=randomString(8);var r="TG_detail";t.after('<tr id="'+n+'" class="'+r+'"><td colspan="'+a+'" class="">'+e+"</td></tr>")}})}else if(e(this).parent().attr("class")=="detailOpen"){e(this).parent().attr("class","detailClose");t.next().remove()}return false})});return this}})(jQuery)